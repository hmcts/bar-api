databaseChangeLog:
  - changeSet:
      id: 1
      author: jalald
      changes:
        - createTable:
            tableName: hello
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: hello
                  type: varchar(150)
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: varchar(2000)
                  constraints:
                    nullable: false
  - changeSet:
      id: 2
      author: sachi
      changes:
        - sql: >
            INSERT INTO hello (id, hello, description)
            VALUES
              (1, 'hello', 'hello every body');

  - changeSet:
        id: 3
        author: sachi
        changes:
          - createTable:
              tableName: payment
              columns:
                - column:
                    name: id
                    type: int
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                      nullable: false
                - column:
                    name: payee_name
                    type: varchar(150)
                    constraints:
                      nullable: false
                - column:
                    name: case_reference
                    type: varchar(150)
                    constraints:
                      nullable: false
                - column:
                    name: payment_channel
                    type: varchar(50)
                    constraints:
                      nullable: false
                - column:
                    name: payment_date
                    type: timestamp
                    constraints:
                      nullable: false
                - column:
                    name: amount
                    type: int
                    constraints:
                      nullable: false

  - changeSet:
        id: 4
        author: sachi
        changes:
          - createTable:
              tableName: payment_type
              columns:
                - column:
                    name: id
                    type: int
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                      nullable: false
                - column:
                    name: name
                    type: varchar(50)
                    constraints:
                      nullable: false
          - sql: >
              INSERT INTO payment_type (id,name)
              VALUES
                (1, 'Cheque'),
                (2, 'Cash'),
                (3, 'Payment by Account'),
                (4, 'Postal order'),
                (5, 'Foreign cheque'),
                (6, 'Request to ring');
  - changeSet:
          id: 5
          author: sachi
          changes:
            - createTable:
                tableName: service
                columns:
                  - column:
                      name: id
                      type: int
                      autoIncrement: true
                      constraints:
                        primaryKey: true
                        nullable: false
                  - column:
                      name: name
                      type: varchar(156)
                      constraints:
                        nullable: false

            - sql: >
                INSERT INTO service (name)
                VALUES
                  ('Civil'),
                  ('Family'),
                  ('Tribunals');

            - createTable:
                tableName: sub_service
                columns:
                  - column:
                      name: id
                      type: int
                      autoIncrement: true
                      constraints:
                        primaryKey: true
                        nullable: false
                  - column:
                      name: name
                      type: varchar(156)
                      constraints:
                        nullable: false
                  - column:
                      name: service_id
                      type: int
                      constraints:
                        foreignKeyName: fk_service_id
                        references: service(id)
                        nullable: true

            - sql: >
                INSERT INTO sub_service (name,service_id)
                VALUES
                  ('County', (select id from service where name = 'Civil')),
                  ('Magistrates Civil',(select id from service where name = 'Civil')),
                  ('RCJ',(select id from service where name = 'Civil')),
                  ('Adoption',(select id from service where name = 'Family')),
                  ('Court of Protection',(select id from service where name = 'Family')),
                  ('Divorce',(select id from service where name = 'Family')),
                  ('Family Law',(select id from service where name = 'Family')),
                  ('Private Law',(select id from service where name = 'Family')),
                  ('Probate',(select id from service where name = 'Family')),
                  ('Public Law',(select id from service where name = 'Family')),
                  ('All other tribunals',(select id from service where name = 'Tribunals')),
                  ('Employment Tribunals',(select id from service where name = 'Tribunals')),
                  ('Immigration and Asylum Chamber',(select id from service where name = 'Tribunals')),
                  ('Property, Gender Recognition, Gambling',(select id from service where name = 'Tribunals'));

  - changeSet:
          id: 6
          author: sachi
          changes:
            - dropTable:
                tableName: hello



            - createTable:
                tableName : court_case
                columns:
                  - column:
                      name: id
                      type: int
                      autoIncrement: true
                      constraints:
                        primaryKey: true
                        nullable: false
                  - column:
                      name: reference
                      type: varchar(156)
                      constraints:
                        nullable: false
                  - column:
                      name: jurisdiction1
                      type: varchar(100)
                      constraints:
                        nullable: false
                  - column:
                      name: jurisdiction2
                      type: varchar(100)
                      constraints:
                        nullable: false
                  - column:
                      name: payment_id
                      type: int
                      constraints:
                        foreignKeyName: fk_payment_id
                        references: payment(id)
                  - column:
                      name: sub_service_id
                      type: int
                      constraints:
                        foreignKeyName: fk_sub_service_id
                        references: sub_service(id)

            - dropColumn:
                columnName: case_reference
                tableName:  payment

            - dropColumn:
                columnName: payment_channel
                tableName:  payment

            - addColumn:
                columns:
                  - column:
                      name: payment_type
                      type: int
                      constraints:
                        foreignKeyName: fk_payment_type_id
                        references: payment_type(id)
                  - column:
                      name: payment_receipt_type
                      type: varchar(50)
                      constraints:
                        nullable: false
                  - column:
                      name: counter_code
                      type: varchar(50)
                      constraints:
                        nullable: true
                  - column:
                      name: event_type
                      type: varchar(50)
                      constraints:
                        nullable: true
                  - column:
                      name: fee_code
                      type: varchar(50)
                      constraints:
                        nullable: true
                  - column:
                      name: sort_code
                      type: varchar(6)
                      constraints:
                        nullable: true
                  - column:
                      name: account_number
                      type: varchar(8)
                      constraints:
                        nullable: true
                  - column:
                      name: cheque_number
                      type: varchar(10)
                      constraints:
                        nullable: true
                  - column:
                      name: currency
                      type: varchar(10)
                      constraints:
                        nullable: false
                  - column:
                      name: created_by_user_id
                      type: varchar(20)
                      constraints:
                        nullable: false
                  - column:
                      name: updated_by_user_id
                      type: varchar(20)
                      constraints:
                        nullable: true
                  - column:
                      name: fee_clark_status
                      type: varchar(20)
                      constraints:
                        nullable: true
                  - column:
                      name: update_date
                      type: timestamp
                      constraints:
                        nullable: true
                tableName: payment


  - changeSet:
          id: 7
          author: sachi
          changes:
            - renameColumn:
                oldColumnName: payment_type
                newColumnName: payment_type_id
                tableName: payment
  - changeSet:
          id: 8
          author: sachi
          changes:
            - sql: >
                UPDATE payment_type SET name = 'Cheque' WHERE id = 1;
                UPDATE payment_type SET name = 'Full Remission' WHERE id = 2;
                UPDATE payment_type SET name = 'Card' WHERE id = 3;
                UPDATE payment_type SET name = 'Postal Order' WHERE id = 4;
                UPDATE payment_type SET name = 'Cash' WHERE id = 5;
                UPDATE payment_type SET name = 'AllPay' WHERE id = 6;

            - modifyDataType:
               columnName: payee_name
               newDataType: varchar(256)
               tableName: payment

            - modifyDataType:
               columnName: sort_code
               newDataType: char(6)
               tableName: payment

            - modifyDataType:
               columnName: cheque_number
               newDataType: char(6)
               tableName: payment

            - modifyDataType:
               columnName: account_number
               newDataType: char(8)
               tableName: payment
